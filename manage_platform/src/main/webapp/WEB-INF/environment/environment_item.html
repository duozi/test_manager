<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <script src="../js/alert.js" type="text/javascript"></script>


</head>

<body>
<!-- 	 -->
<div class="panel-heading">
    <ol class="breadcrumb">
        <li><a href="#">接口自动化</a></li>
        <li><a href="#">测试用例管理</a></li>
        <li class="active">新增测试环境</li>
    </ol>
</div>
<div class="col-lg-14">
    <div class="panel panel-default">

        <form id="case-form" role="form" class="case-form">
            <input type="hidden" name="id">
            <div id="case-form-div">

                <div class="form-group ">
                    <label>环境名</label>
                    <input class="form-control col-lg-5">
                </div>
                <!--用例id-->
                <div class="form-group ">
                    <label>环境ID</label>
                    <input class="form-control col-lg-5">
                </div>
                <!--所属测试集-->
                <div class="form-group ">
                    <label>所属系统</label>
                    <select class="form-control col-lg-5">
                        <option value="" disabled selected>选择系统名称</option>
                        <option value="">2</option>
                        <option value="">3</option>
                        <option value="">4</option>
                        <option value="">5</option>
                    </select>
                </div>
                <div class="form-group ">
                    <label>新增配置</label>
                    <div class="choose-sys case-choose" style="display: inline-flex">
                        <label class="checkbox-inline" style="margin-top: 0">
                            <input type="checkbox" value="serviceProperties" name="properties">service配置
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="zkProperties" name="properties">zk配置
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="dbProperties" name="properties">数据库配置
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="redisProperties" name="properties">redis配置
                        </label>
                    </div>
                </div>
                <!--service配置-->
                <div id="service-form-div" class="panel panel-default panel-collapse collapse operation-width">
                    <!-- service配置 -->
                    <label class="control-label col-lg-4 top-label">service配置</label>

                    <div class="panel panel-default operation">
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table case-table">
                                    <thead>
                                    <tr>
                                        <th style="width: 20%">service名</th>
                                        <th style="width: 30%">ip</th>
                                        <th style="width: 20%">http端口号</th>
                                        <th style="width: 20%">dubbo端口号</th>
                                        <th>操作</th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <div class="row">
                                            <td>
                                                <select class="form-control">
                                                    <#if contentTypeList ??>
                                                        <#list contentTypeList as item>
                                                            <option values="${item.getId()}"> ${item.getName()}</option>
                                                        </#list>
                                                    </#if>
                                                </select>
                                            </td>
                                            <td><input type="text" class="form-control"></td>
                                            <td><input type="text" class="form-control"></td>
                                            <td><input type="text" class="form-control"></td>
                                            <td>
                                                <button type="submit" class="btn btn-info">保存</button>
                                            </td>
                                            <td>
                                                <button type="button" name="delete" class="btn btn-info">删除</button>
                                            </td>
                                        </div>
                                    </tr>
                                    <tr>
                                        <td style=" border: none"><span id="addServiceProperties"
                                                                        class="btn btn-info"><i
                                                class="icon icon-plus-sign"></i>添加Service配置</span></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!--zk配置-->
                <div id="zk-form-div" class="panel panel-default panel-collapse collapse operation-width">
                    <!-- zk配置 -->
                    <label class="control-label col-lg-4 top-label">zk配置</label>

                    <div class="panel panel-default operation">
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table case-table">
                                    <thead>
                                    <tr>
                                        <th style="width: 30%">service名</th>
                                        <th style="width: 60%">ip和端口号</th>
                                        <th>操作</th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <div class="row">
                                            <td>
                                                <select class="form-control">
                                                    <#if contentTypeList ??>
                                                        <#list contentTypeList as item>
                                                            <option values="${item.getId()}"> ${item.getName()}</option>
                                                        </#list>
                                                    </#if>
                                                </select>
                                            </td>
                                            <td><textarea type="text" class="form-control"
                                                          style="width: 100% ;height: 34px;resize: vertical"></textarea></td>

                                            <td>
                                                <button type="submit" class="btn btn-info">保存</button>
                                            </td>
                                            <td>
                                                <button type="button" name="delete" class="btn btn-info">删除</button>
                                            </td>
                                        </div>
                                    </tr>
                                    <tr>
                                        <td style=" border: none"><span id="addZkProperties"
                                                                        class="btn btn-info"><i
                                                class="icon icon-plus-sign"></i>添加Zk配置</span></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!--数据库配置-->
                <div id="db-form-div" class="panel panel-default panel-collapse collapse operation-width">
                    <!-- 数据库配置 -->
                    <label class="control-label col-lg-4 top-label">数据库配置</label>

                    <div class="panel panel-default operation">
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table case-table">
                                    <thead>
                                    <tr>
                                        <th style="width: 10%">数据库名</th>
                                        <th style="width: 10%">数据库类型</th>
                                        <th style="width: 15%">ip</th>
                                        <th style="width: 10%">端口号</th>
                                        <th style="width: 15%">库名</th>
                                        <th style="width: 15%">用户名</th>
                                        <th style="width: 15%">密码</th>
                                        <th>操作</th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <div class="row">
                                            <td><input type="text" class="form-control"></td>
                                            <td>
                                                <select class="form-control">
                                                    <#if contentTypeList ??>
                                                        <#list contentTypeList as item>
                                                            <option values="${item.getId()}"> ${item.getName()}</option>
                                                        </#list>
                                                    </#if>
                                                </select>
                                            </td>
                                            <td><input type="text" class="form-control"></td>
                                            <td><input type="text" class="form-control"></td>
                                            <td><input type="text" class="form-control"></td>
                                            <td><input type="text" class="form-control"></td>
                                            <td><input type="text" class="form-control"></td>
                                            <td>
                                                <button type="submit" class="btn btn-info">保存</button>
                                            </td>
                                            <td>
                                                <button type="button" name="delete" class="btn btn-info">删除</button>
                                            </td>
                                        </div>
                                    </tr>
                                    <tr>
                                        <td style=" border: none"><span id="addDbProperties"
                                                                        class="btn btn-info"><i
                                                class="icon icon-plus-sign"></i>添加数据库配置</span></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!--redis配置-->
                <div id="redis-form-div" class="panel panel-default panel-collapse collapse operation-width">
                    <!-- redis配置 -->
                    <label class="control-label col-lg-4 top-label">redis配置</label>

                    <div class="panel panel-default operation">
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table case-table">
                                    <thead>
                                    <tr>
                                        <th style="width: 10%">redis名</th>
                                        <th style="width: 10%">timeout</th>
                                        <th style="width: 10%">重试次数</th>
                                        <th style="width: 60%">集群</th>
                                        <th>操作</th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <div class="row">
                                            <td><input type="text" class="form-control"></td>
                                            <td><input type="text" class="form-control"></td>
                                            <td><input type="text" class="form-control"></td>
                                            <td>

                                                <textarea class="form-control"
                                                          style="height:34px;width: 100%;
                                                          resize:vertical"></textarea>
                                            </td>
                                            <td>
                                                <button type="submit" class="btn btn-info">保存</button>
                                            </td>
                                            <td>
                                                <button type="button" name="delete" class="btn btn-info">删除</button>
                                            </td>
                                        </div>
                                    </tr>
                                    <tr>
                                        <td style=" border: none"><span id="addRedisProperties"
                                                                        class="btn btn-info"><i
                                                class="icon icon-plus-sign"></i>添加redis配置</span></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>


            </div>

        </form>
    </div>
</div>


<script type="text/javascript">

    var servicePropertiesHtml = '<tr>';
    servicePropertiesHtml += '<div class="row">';
    servicePropertiesHtml += '<td>';
    servicePropertiesHtml += '<select class="form-control">';
    servicePropertiesHtml += '<#if contentTypeList ??>';
    servicePropertiesHtml += '<#list contentTypeList as item>';
    servicePropertiesHtml += '<option values="${item.getId()}"> ${item.getName()}</option>';
    servicePropertiesHtml += '</#list>';
    servicePropertiesHtml += '</#if>';
    servicePropertiesHtml += '</select>';
    servicePropertiesHtml += '</td>';
    servicePropertiesHtml += '<td><input type="text" class="form-control"></td>';
    servicePropertiesHtml += '<td><input type="text" class="form-control"></td>';
    servicePropertiesHtml += '<td><input type="text" class="form-control"></td>';
    servicePropertiesHtml += '<td>';
    servicePropertiesHtml += '<button type="submit" class="btn btn-info">保存</button>';
    servicePropertiesHtml += '</td>';
    servicePropertiesHtml += '<td>';
    servicePropertiesHtml += '<button type="button" name="delete" class="btn btn-info">删除</button>';
    servicePropertiesHtml += '</td>';
    servicePropertiesHtml += '</div>';
    servicePropertiesHtml += '</tr>';


    var zkPropertiesHtml='<tr>';
    zkPropertiesHtml+='<div class="row">';
    zkPropertiesHtml+='<td>';
    zkPropertiesHtml+='<select class="form-control">';
    zkPropertiesHtml+='<#if contentTypeList ??>';
    zkPropertiesHtml+='<#list contentTypeList as item>';
    zkPropertiesHtml+='<option values="${item.getId()}"> ${item.getName()}</option>';
    zkPropertiesHtml+='</#list>';
    zkPropertiesHtml+='</#if>';
    zkPropertiesHtml+='</select>';
    zkPropertiesHtml+='</td>';
    zkPropertiesHtml+='<td><textarea type="text" class="form-control" style="width: 100% ;height: 34px;resize: vertical"></textarea></td>';
    zkPropertiesHtml+='<td>';
    zkPropertiesHtml+='<button type="submit" class="btn btn-info">保存</button>';
    zkPropertiesHtml+='</td>';
    zkPropertiesHtml+='<td>';
    zkPropertiesHtml+='<button type="button" name="delete" class="btn btn-info">删除</button>';
    zkPropertiesHtml+='</td>';
    zkPropertiesHtml+='</div>';
    zkPropertiesHtml+='</tr>';

    var dbPropertiesHtml = '<tr>';
    dbPropertiesHtml += '<div class="row">';
    dbPropertiesHtml += '<td><input type="text" class="form-control"></td>';
    dbPropertiesHtml += '<td>';
    dbPropertiesHtml += '<select class="form-control" >';
    dbPropertiesHtml += '<#if contentTypeList ??>';
    dbPropertiesHtml += '<#list contentTypeList as item>';
    dbPropertiesHtml += '<option values="${item.getId()}"> ${item.getName()}</option>';
    dbPropertiesHtml += '</#list>';
    dbPropertiesHtml += '</#if>';
    dbPropertiesHtml += '</select>';
    dbPropertiesHtml += '</td>';
    dbPropertiesHtml += '<td><input type="text" class="form-control"></td>';
    dbPropertiesHtml += '<td><input type="text" class="form-control"></td>';
    dbPropertiesHtml += '<td><input type="text" class="form-control"></td>';
    dbPropertiesHtml += '<td><input type="text" class="form-control"></td>';
    dbPropertiesHtml += '<td><input type="text" class="form-control"></td>';
    dbPropertiesHtml += '<td>';
    dbPropertiesHtml += '<button type="submit" class="btn btn-info">保存</button>';
    dbPropertiesHtml += '</td>';
    dbPropertiesHtml += '<td>';
    dbPropertiesHtml += '<button type="button" name="delete" class="btn btn-info">删除</button>';
    dbPropertiesHtml += '</td>';
    dbPropertiesHtml += '</div>';
    dbPropertiesHtml += '</tr>';

    var redisPropertiesHtml = '<tr>';
    redisPropertiesHtml += '<div class="row">';
    redisPropertiesHtml += '<td><input type="text" class="form-control"></td>';
    redisPropertiesHtml += '<td><input type="text" class="form-control"></td>';
    redisPropertiesHtml += '<td><input type="text" class="form-control"></td>';
    redisPropertiesHtml += '<td >';
    redisPropertiesHtml += '<textarea type="text" class="form-control" style="height: 34px;width: 100%;resize:vertical" ></textarea>';
    redisPropertiesHtml += '</td>';
    redisPropertiesHtml += '<td>';
    redisPropertiesHtml += '<button type="submit" class="btn btn-info">保存</button>';
    redisPropertiesHtml += '</td>';
    redisPropertiesHtml += '<td>';
    redisPropertiesHtml += '<button type="button" name="delete" class="btn btn-info">删除</button>';
    redisPropertiesHtml += '</td>';
    redisPropertiesHtml += '</div>';
    redisPropertiesHtml += '</tr>';

    $("input[name='properties']").click(function () {
        var type = $(this).val();
        if (type == 'serviceProperties' && $(this).is(':checked')) {
            $("#service-form-div").addClass("in");
        } else if (type == 'serviceProperties' && !$(this).is(':checked')) {
            $("#service-form-div").removeClass("in");
        }
        if (type == 'zkProperties' && $(this).is(':checked')) {
            $("#zk-form-div").addClass("in");
        } else if (type == 'zkProperties' && !$(this).is(':checked')) {
            $("#zk-form-div").removeClass("in");
        }
        if (type == 'dbProperties' && $(this).is(':checked')) {
            $("#db-form-div").addClass("in");
        } else if (type == 'dbProperties' && !$(this).is(':checked')) {
            $("#db-form-div").removeClass("in");
        }
        if (type == 'redisProperties' && $(this).is(':checked')) {
            $("#redis-form-div").addClass("in");
        } else if (type == 'redisProperties' && !$(this).is(':checked')) {
            $("#redis-form-div").removeClass("in");
        }


    });
    $("#addServiceProperties").click(function () {
        $(this).parent().parent().before(servicePropertiesHtml);
        $("button[name='delete']").click(function () {
            $(this).parent().parent().remove();
        });

    });
    $("#addZkProperties").click(function () {
        $(this).parent().parent().before(zkPropertiesHtml);
        $("button[name='delete']").click(function () {
            $(this).parent().parent().remove();
        });

    });
    $("#addRedisProperties").click(function () {
        $(this).parent().parent().before(redisPropertiesHtml);
        $("button[name='delete']").click(function () {
            $(this).parent().parent().remove();
        });

    });
    $("#addDbProperties").click(function () {
        $(this).parent().parent().before(dbPropertiesHtml);
        $("button[name='delete']").click(function () {
            $(this).parent().parent().remove();
        });
    });
    $("button[name='delete']").click(function () {
        $(this).parent().parent().remove();
    });


</script>
</body>

</html>