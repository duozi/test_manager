<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Custom Fonts -->
    <link href="../../../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!--datetimepicker-->
    <link href="../../../vendor/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css" rel="stylesheet"
          type="text/css">
    <link href="../../../vendor/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet"
          type="text/css">
    <script src="../../../vendor/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
    <script src="../../../vendor/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
    <script src="../../../vendor/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {

        });

    </script>
</head>
<body>
<div class="panel-heading">
    <ol class="breadcrumb">
        <li><a href="#">性能自动化</a></li>
        <li><a href="report_list">测试结果管理</a></li>
        <li class="active">测试结果详情</li>
    </ol>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default ">
            <!-- /.panel-heading -->
            <div class="panel-body">
                <!--公共参数-->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        结果详情
                    </div>
                    <!-- /.panel-heading -->
                    <div class="panel-body">
                        <div class="table-responsive col-lg-12">
                            <table class="table table-striped table-bordered table-hover">
                                <thead>
                                <tr class="alert-warning">
                                    <th>结果id</th>
                                    <th>计划名</th>
                                    <th>执行人</th>
                                    <th>公司</th>
                                    <th>部门</th>
                                    <th>系统</th>
                                    <th>开始时间</th>
                                    <th>结束时间</th>
                                    <th>执行时长(s)</th>
                                </tr>
                                </thead>
                                <tbody>
                                <#if result_detail ?? && plan_detail ??>
                                    <tr>
                                        <td>${result_detail.id}</td>
                                        <td>${plan_detail.planName}</td>
                                        <td>${result_detail.executePerson}</td>
                                        <td>${plan_detail.company}</td>
                                        <td>${plan_detail.department}</td>
                                        <td>${plan_detail.psystem}</td>
                                        <td>${result_detail.actualStartTime?datetime}</td>
                                        <td>${result_detail.actualEndTime?datetime}</td>
                                        <td>${result_detail.executeTime}</td>
                                    </tr>

                                </#if>

                                </tbody>
                            </table>
                            <table class="table table-striped table-bordered table-hover">
                                <thead>
                                <tr class="alert-info">
                                    <th>压力机名</th>
                                    <th>压力机ip</th>
                                    <th>脚本名</th>
                                    <th>场景名</th>
                                    <th>并发数</th>
                                    <th>线程启动时间</th>
                                    <th>循环次数</th>
                                    <th>持续时间(s)</th>
                                    <th>启动延迟(s)</th>
                                    <th>启动时间</th>
                                    <th>结束时间</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <#if scenario_detail ?? && script_detail ?? && stress_machine_detail ??>
                                        <td>${stress_machine_detail.stressMachineName}</td>
                                        <td>${stress_machine_detail.ip}</td>
                                        <td>${script_detail.scriptName}</td>
                                        <td>${scenario_detail.scenarioName}</td>

                                        <td>
                                            <#if scenario_detail.concurrency ??>
                                                ${scenario_detail.concurrency}
                                            </#if>
                                        </td>
                                        <td>
                                            <#if scenario_detail.startup ??>
                                                ${scenario_detail.startup}
                                            </#if>
                                        </td>
                                        <td>
                                            <#if scenario_detail.cycle ??>
                                                ${scenario_detail.cycle}
                                            </#if>
                                        </td>
                                        <td>
                                            <#if scenario_detail.executeTime ??>
                                                ${scenario_detail.executeTime}
                                            </#if>
                                        </td>
                                        <td>
                                            <#if scenario_detail.delayTime ??>
                                                ${scenario_detail.delayTime}
                                            </#if>
                                        </td>
                                        <td>
                                            <#if scenario_detail.setStartTime ??>
                                                ${scenario_detail.setStartTime?datetime}
                                            </#if>
                                        </td>
                                        <td>
                                            <#if scenario_detail.setEndTime ??>
                                                ${scenario_detail.setEndTime?datetime}
                                            </#if>
                                        </td>
                                    </#if>

                                </tr>
                                </tbody>
                            </table>
                            <table class="table table-striped table-bordered table-hover report_detail_table">
                                <thead>
                                <tr class="alert-success">
                                    <th>监控机名</th>
                                    <th>监控机ip</th>
                                    <th>请求数</th>
                                    <th>平均响应时间(ms)</th>
                                    <th>最大响应时间(ms)</th>
                                    <th>最小响应时间(ms)</th>
                                    <th>失败请求数</th>
                                    <th>失败请求数</th>
                                    <th>kb/sec</th>
                                    <th>负载</th>
                                    <th>kps</th>
                                    <th>内存</th>
                                </tr>
                                </thead>
                                <tbody>

                                <#if monitored_machine_detail_list ??>
                                    <#list  monitored_machine_detail_list as item>
                                        <tr>
                                            <td>${item.monitoredMachineName}</td>
                                            <td>${item.monitoredMachineIp}</td>
                                            <td>${item.samples}</td>
                                            <td>${item.average}</td>
                                            <td>${item.minTime}</td>
                                            <td>${item.maxTime}</td>
                                            <td>${item.error}</td>
                                            <td>${item.throughput}</td>
                                            <td>${item.kbsec}</td>
                                            <td>${item.machineLoad}</td>
                                            <td>${item.qps}</td>
                                            <td>${item.memory}</td>
                                        </tr>
                                    </#list>
                                </#if>

                                </tbody>
                            </table>
                            <iframe style="width: 100%;height: 800px" frameborder="0" scrolling="auto"
                                    src="http://10.17.2.137${result_detail.resultPath}">

                            </iframe>
                        </div>
                    </div>
                </div>

            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
    <!-- 新增测试计划弹框 -->
    <div class="modal fade" id="email" tabindex="-1" role="dialog" aria-labelledby="emailLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="emailLabel">配置邮件收件人</h4>
                </div>
                <div class="modal-body modal-email">
                    <form role="form " class="col-lg-12 ">
                        <textarea type="text" name="emailAddress"
                                  placeholder="请输入邮箱地址，以分号隔开。例如：1234567@qq.com;xiaoming@sina.com"></textarea>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary">发送</button>
                    <button type="button" class="btn btn-info">保存</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>
</body>
<!-- jQuery -->
</html>