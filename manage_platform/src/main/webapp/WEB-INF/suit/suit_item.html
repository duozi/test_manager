<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

</head>

<body>
	<div class="panel-heading">
		<ol class="breadcrumb">
		  	<li><a href="#">接口自动化</a></li>
		  	<li><a href="#">测试集管理</a></li>
		  	<li class="active">新增测试集</li>
		</ol>
    </div>
    <div class="col-lg-14">
        <div class="panel panel-default" >

			<div class="panel-body">
				<!-- 计划基本配置 -->
				<form role="form " class="col-lg-12 edit-form">
			 		<div class="col-lg-6 form-div">
						<div class="form-group">
							<label class="control-label" for="createPerson" >创建人</label>
							<input type="text" class="form-control" id="createPerson" name="createPerson" placeholder="请输入您的姓名">
						</div>
				 		<div class="form-group">
				             <label class="control-label" for="name" >测试集名称</label>
				             <input type="text" class="form-control" id="suitName" name="name" placeholder="请输入测试集名称">
				         </div>
				         <div class="form-group">
		                      <label class="control-label" for="systemId">选择系统</label>
		                      <div class="choose-sys">
			                      <label class="checkbox-inline">
			                          <input type="checkbox">牛贷系统
			                      </label>
			                      <label class="checkbox-inline">
			                          <input type="checkbox">支付平台
			                      </label>
			                      <label class="checkbox-inline">
			                          <input type="checkbox">管理平台
			                      </label>
		                      </div>
		                  </div>
						<div class="form-group">
		                      <label class="control-label" for="interfaceType">被测接口类型</label>
		                      <div class="choose-sys">
			                      <label class="checkbox-inline" >
			                          <input type="checkbox" value="dubbo" name="interfaceType">dubbo接口
			                      </label>
			                      <label class="checkbox-inline">
			                          <input type="checkbox" value="http"  name="interfaceType">http接口
			                      </label>
		                      </div>
						</div>
						<div class="form-group">
							<button type="submit" class="btn btn-info">保存</button>
						</div>
					</div>
				</form>
				<!-- 接口配置，dubbo -->
				<div id="dubbo-form-div" class="panel-collapse collapse">
					<form id="dubbo-form" class="edit-form panel panel-default col-lg-10">
						<label class="control-label col-lg-6 title-label" >dubbo接口属性配置</label>
						<div class="form-group ">
							<label class="control-label" for="name" >接口名称</label>
							<input type="text" class="form-control" id="planName" name="name" placeholder="请输入dubbo接口名称">
						</div>
						<div class="form-group">
							<label class="control-label" for="zkOrNot">调用方式</label>
							<select class="form-control" id="zkOrNot" name="zkOrNot">
								<option values="true">通过zookeeper注册中心</option>
								<option values="false">不通过zookeeper注册中心</option>
							</select>
						</div>
						<div class="form-group">
							<label class="control-label" for="zkIP" >zookeeper地址</label>
							<input type="text" class="form-control" id="zkIP" name="zkIP" placeholder="请输入注册中心地址，多个地址以分号隔开">
						</div>
						<div class="panel panel-default">
							<div class="panel-heading">
								服务列表
							</div>
							<div class="panel-body">
								<div class="table-responsive">
									<table class="table">
										<thead>
										<tr>
											<th>服务名称</th>
											<th>主机名</th>
											<th>应用名</th>
											<th>版本</th>
											<th>分组</th>
											<th>超时</th>
											<th>操作</th>
										</tr>
										</thead>
										<tbody>
											<tr>
												<td>例如：rrx360credit</td>
												<td>10.17.2.190:25229</td>
												<td>rrx360credit-front-service</td>
												<td>3.0</td>
												<td>creditcompany</td>
												<td>30000</td>
											</tr>
											<tr>
												<div class="row">
													<form id="service-form" class="">
														<div class="col-xs-3">
															<td><input type="text" class="form-control" placeholder="服务名称" readonly></td>
														</div>
														<div class="col-xs-4">
															<td><input type="text" class="form-control" placeholder="主机名" readonly></td>
														</div>
														<div class="col-xs-5">
															<td><input type="text" class="form-control" placeholder="应用名"></td>
														</div>
														<div class="col-xs-3">
															<td><input type="text" class="form-control" placeholder="版本"></td>
														</div>
														<div class="col-xs-4">
															<td><input type="text" class="form-control" placeholder="分组"></td>
														</div>
														<div class="col-xs-5">
															<td><input type="text" class="form-control" placeholder="超时"></td>
														</div>
														<div class="col-xs-5">
															<td><button type="submit" class="btn btn-info">保存</button></td>
														</div>
													</form>
												</div>
											</tr>
										</tbody>
									</table>
								</div>
								<!-- /.table-responsive -->
							</div>
							<!-- /.panel-body -->
						</div>
						<!-- /.panel -->
					</form>
				</div>

				<!-- 接口配置，http -->
				<div id="http-form-div" class="panel-collapse collapse">
					<form id="http-form"  class="edit-form col-lg-10 panel panel-default">
						<!-- http接口 -->
						<label class="control-label col-lg-4 title-label" >http接口属性配置</label>
						<div class="form-group">
							<label class="control-label" for="requestIP" >服务器地址</label>
							<input type="text" class="form-control" id="requestIP" name="requestIP" placeholder="请求服务器地址，会从环境配置获取" readonly>
						</div>

						<div class="panel panel-default">
							<div class="panel-heading">
								接口列表
							</div>
							<div class="panel-body">
								<div class="table-responsive">
									<table class="table">
										<thead>
										<tr>
											<th>接口名称</th>
											<th>请求路径</th>
											<th>协议类型</th>
											<th>请求方式</th>
											<th>Content-Type</th>
											<th>操作</th>
										</tr>
										</thead>
										<tbody>
											<tr>
												<td>例如：queryRiskService</td>
												<td>tongduncredit-service/tongduncredit/queryRiskService</td>
												<td>http</td>
												<td>post</td>
												<td>application/json</td>
											</tr>
											<tr>
												<div class="row">
													<form id="http-request-form" class="">
														<div class="col-xs-3">
															<td><input type="text" class="form-control" placeholder="接口名称"></td>
														</div>
														<div class="col-xs-5">
															<td><input type="text" class="form-control" placeholder="请求路径"></td>
														</div>
														<div class="col-xs-3">
															<td>
																<select class="form-control" id="httpType" name="httpType">
																	<#if httpTypeList ??>
																		<#list httpTypeList as item>
																			<option values="${item.getId()}">${item.getName()}</option>
																		</#list>
																	</#if>
																</select>
															</td>
														</div>
														<div class="col-xs-4">
															<td>
																<select class="form-control" id="requestType" name="requestType">
																	<#if requestTypeList ??>
																		<#list requestTypeList as item>
																			<option values="${item.getId()}">${item.getName()}</option>
																		</#list>
																	</#if>
																</select>
															</td>
														</div>
														<div class="col-xs-5">
															<td>
																<select class="form-control" id="contentType" name="contentType">
																	<#if contentTypeList ??>
																		<#list contentTypeList as item>
																			<option values="${item.getId()}">${item.getName()}</option>
																		</#list>
																	</#if>
																</select>
															</td>
														</div>
														<div class="col-xs-5">
															<td><button type="submit" class="btn btn-info">保存</button></td>
														</div>
													</form>
												</div>
											</tr>

											<tr>
												<td style=" border: none"><span  id="addHttpInterface" class="btn btn-info"><i class="icon icon-plus-sign"></i>添加接口</span></td>
											</tr>
										</tbody>
									</table>
								</div>
								<!-- /.table-responsive -->
							</div>
							<!-- /.panel-body -->
						</div>
					</form>
				</div>

			</div>

		</div>
	</div>

   <!-- /.container-fluid -->

<!-- jQuery -->
<script src="../vendor/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

<!-- Metis Menu Plugin JavaScript -->
<script src="../vendor/metisMenu/metisMenu.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="../dist/js/sb-admin-2.js"></script>
<script type="text/javascript">

    $('#btn').on('click',function(){
        var value = $('#interface').val();
        console.log('value',value);
        var appendDiv = '<div>frae</div>';
        $('#formGroup').append(appendDiv);

        $.ajax({
            type: "get",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            url: "http://localhost:8080/get/queryIndex",//传入后台的地址http:/方法
            data: {'RID':value},//参数，这里是一个json语句
            success: function (data) {
                var result = data;
                alert(result);
                $('#getData').html(result);

            },
            error: function (err) {
                alert("err:" + err);
            }
        });
    });

	$("input[name='interfaceType']").click(
			function(){
				var value = $(this).val();
				if(value == "dubbo" && $(this).is(':checked')){
					$("#dubbo-form-div").addClass("in");
				} else if(value == "dubbo" && !$(this).is(':checked')){
					$("#dubbo-form-div").removeClass("in");
				}
				if(value == "http"  && $(this).is(':checked')){
					$("#http-form-div").addClass("in");
				} else if(value == "http"  && !$(this).is(':checked')){
					$("#http-form-div").removeClass("in");
				}
			}
	);

	$("#addHttpInterface").click(
			function(){
				var html = "<tr><div class='row'><form id='http-request-form'><div class='col-xs-3'><td>";
				html += "<input type='text' class='form-control' placeholder='接口名称'></td>";
				html += '</div> <div class="col-xs-5"><td>';
				html += '<input type="text" class="form-control" placeholder="请求路径"></td>';
				html += '</div> <div class="col-xs-3"> <td> ';
				html += '<select class="form-control" id="httpType" name="httpType"> <#if httpTypeList ??>';
				html += '<#list httpTypeList as item> <option values="${item.getId()}">${item.getName()}</option> </#list>';
				html += '</#if></select> </td> </div>';
				html += '<div class="col-xs-4"> <td> <select class="form-control" id="requestType" name="requestType"> <#if requestTypeList ??>';
				html += '<#list requestTypeList as item> <option values="${item.getId()}">${item.getName()}</option> </#list> </#if></select>';
				html += '</td> </div> <div class="col-xs-5"> <td> <select class="form-control" id="contentType" name="contentType">';
				html += '<#if contentTypeList ??><#list contentTypeList as item> <option values="${item.getId()}">${item.getName()}</option> </#list> </#if></select>';
				html += '</td> </div><div class="col-xs-5"><td><button type="submit" class="btn btn-info">保存</button></td></div></form></div> </tr>';
				$(this).parent().parent().before(html);
			}
	);

</script>

</body>

</html>
